# 杏林千问 - 智能中医药健康助手

杏林千问是一个融合现代医疗知识与中医药智慧的高智能中文医疗对话系统，依托生成式大模型能力，结合海量医疗数据与中医药知识库，实现精准问诊、健康咨询与导诊推荐。

## 系统架构

杏林千问系统由以下几个部分组成：

1. **前端界面**：基于HTML/CSS/JavaScript的用户交互界面
2. **中间层服务器**：基于Node.js的中间层，处理前端请求并转发到后端模型
3. **后端模型服务**：运行LLaVA多模态模型的Python服务器

## 功能特点

- **多领域健康咨询**：一般健康问题、中医药知识、慢病管理、体重管理等
- **图像理解能力**：可以上传图像进行分析，如医学报告、症状照片等
- **中医体质辨识**：基于中医体质理论，提供个性化的养生建议
- **智能导诊**：根据症状描述，推荐就医科室和检查项目

## 安装步骤

### 前提条件

- Python 3.8+
- Node.js 14+
- CUDA支持的GPU（运行LLaVA模型）
- 已安装LLaVA相关依赖

### 安装步骤

1. **安装Node.js依赖**

```bash
cd llava_service
npm install
```

2. **确认Python环境已安装LLaVA和相关依赖**

3. **配置模型路径**

编辑`llava_socket_server.py`文件，将`model_path`变量修改为您本地LLaVA模型的路径：

```python
model_path = "/path/to/your/llava/model"
```

## 启动方法

1. **启动LLaVA Socket服务器**

```bash
cd llava_service
CUDA_VISIBLE_DEVICES=0 python llava_socket_server.py
```

2. **启动Node.js中间层服务器**

在另一个终端中运行：

```bash
cd llava_service
npm start
```

3. **访问前端界面**

打开浏览器访问：http://localhost:3000

## 使用指南

1. **选择功能模式**：点击左侧功能导航，选择您需要的模式（健康咨询、中医药问答等）
2. **文字交流**：在底部输入框输入问题后点击发送
3. **图像分析**：点击图像按钮上传图片，可以附带文字描述或直接发送
4. **体质测试**：点击右侧"开始体质测试"按钮，按提示回答问题

## 技术详解

- **前端**：使用Bootstrap框架构建响应式界面
- **中间层**：Express.js处理HTTP请求并通过Socket与Python后端通信
- **后端**：基于LLaVA的多模态模型，支持文本和图像输入

## 注意事项

- 此系统仅供健康咨询参考，不能替代专业医生的诊断和治疗建议
- 图像分析功能依赖于模型的能力，可能不能识别所有医学图像
- 系统可能需要10-20秒生成回复，请耐心等待

## 系统截图

![系统界面](系统界面示例.png)

## 许可证

该项目采用MIT许可证 